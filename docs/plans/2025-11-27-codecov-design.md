# Codecov Integration Design

## Goal

Add Codecov integration to CleverBadge for unified coverage tracking, PR comments, and a README badge.

## Requirements

- Combined coverage percentage (backend + frontend merged)
- Coverage badge in README
- PR comments showing coverage changes
- Historical tracking over time
- Public GitHub repo (no token needed)
- Unit tests only (no E2E coverage)

## Changes

### 1. CI Workflow (`.github/workflows/ci.yml`)

#### Backend Tests Job

**Remove:**
- "Backend Coverage Summary" step (lines 68-82)
- "Upload backend coverage" artifact step (lines 84-90)

**Add:**
```yaml
- name: Upload coverage to Codecov
  uses: codecov/codecov-action@v5
  with:
    files: ./coverage/lcov.info
    fail_ci_if_error: false
```

#### Frontend Tests Job

**Remove:**
- "Frontend Coverage Summary" step (lines 116-130)
- "Upload frontend coverage" artifact step (lines 132-138)

**Add:**
```yaml
- name: Upload coverage to Codecov
  uses: codecov/codecov-action@v5
  with:
    files: ./coverage/lcov.info
    fail_ci_if_error: false
```

### 2. README Badge

Add near the top of `README.md`:

```markdown
[![codecov](https://codecov.io/gh/jnury/cleverbadge/graph/badge.svg)](https://codecov.io/gh/jnury/cleverbadge)
```

## Implementation Notes

- `fail_ci_if_error: false` prevents Codecov outages from blocking deployments
- Codecov automatically merges multiple uploads from the same commit
- No token required for public repositories
- Coverage reports use lcov format (generated by Vitest v8 coverage)

## Result

After implementation:
- Coverage badge displays combined percentage in README
- PRs receive automatic coverage diff comments
- Historical trends available at https://codecov.io/gh/jnury/cleverbadge
